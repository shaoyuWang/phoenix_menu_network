{"remainingRequest":"/Users/wangshaoyu/Desktop/毕业设计/phoenix_menu_network/client/node_modules/babel-loader/lib/index.js!/Users/wangshaoyu/Desktop/毕业设计/phoenix_menu_network/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangshaoyu/Desktop/毕业设计/phoenix_menu_network/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangshaoyu/Desktop/毕业设计/phoenix_menu_network/client/src/views/admin/Role.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangshaoyu/Desktop/毕业设计/phoenix_menu_network/client/src/views/admin/Role.vue","mtime":1548870481000},{"path":"/Users/wangshaoyu/Desktop/毕业设计/phoenix_menu_network/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangshaoyu/Desktop/毕业设计/phoenix_menu_network/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/wangshaoyu/Desktop/毕业设计/phoenix_menu_network/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangshaoyu/Desktop/毕业设计/phoenix_menu_network/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    return {\n      title: '',\n      roles: [],\n      dialogFormVisible: false,\n      checkSubmit: true,\n      roleId: '',\n      form: {\n        name: '',\n        comment: ''\n      },\n      testName: '',\n      currentRole: [],\n      RolePermission: false\n    };\n  },\n  mounted: function mounted() {\n    this.getRoles(); // this.getUserAuthority();\n  },\n  methods: {\n    // 提交判断\n    Submit: function Submit() {\n      this.dialogFormVisible = false;\n\n      if (this.checkSubmit) {\n        this.createRole();\n      } else {\n        this.updateRole();\n      }\n    },\n    // 取消方法\n    Close: function Close() {\n      this.dialogFormVisible = false;\n      this.resetDialog();\n    },\n    // 清空模态框\n    resetDialog: function resetDialog() {\n      this.form.name = '';\n      this.form.comment = '';\n    },\n    // 添加用户\n    addRole: function addRole() {\n      this.title = 'Add Role';\n      this.dialogFormVisible = true;\n      this.resetDialog();\n    },\n    // 创建用户方法\n    createRole: function createRole() {\n      var _this = this;\n\n      var data = {\n        name: this.form.name,\n        comment: this.form.comment\n      }; // 验证name是否重复\n\n      this.$axios({\n        url: '/api/v1/roles/' + data.name,\n        method: 'get'\n      }).then(function (res) {\n        if (res.data.code == 200) {\n          var findName = res.data.data; // 判断name是否为空\n\n          if (data.name != '') {\n            if (findName != 200) {\n              _this.$axios({\n                url: '/api/v1/roles',\n                method: 'post',\n                data: data\n              }).then(function (res) {\n                if (res.data.code == 200) {\n                  _this.getRoles();\n                } else {\n                  _this.$router.push({\n                    path: \"/nopermisson\"\n                  });\n                }\n              });\n            } else {\n              _this.dialogFormVisible = true;\n              alert('Repeat Name, Please Input Again');\n            }\n          } else {\n            _this.dialogFormVisible = true;\n            alert('Please Input Name');\n          }\n        } else {\n          _this.$router.push({\n            path: \"/nopermisson\"\n          });\n        }\n      });\n    },\n    // 更新用户对话框\n    copyRole: function copyRole(index, data) {\n      this.title = 'Update Role';\n      this.dialogFormVisible = true;\n      this.checkSubmit = false;\n      this.roleId = data.id;\n      this.form.name = data.name;\n      this.form.comment = data.comment;\n      this.testName = data.name;\n    },\n    // 更新角色\n    updateRole: function updateRole() {\n      var _this2 = this;\n\n      var data = {\n        name: this.form.name,\n        comment: this.form.comment\n      }; // 验证name是否重复\n\n      this.$axios({\n        url: '/api/v1/roles/' + data.name,\n        method: 'get'\n      }).then(function (res) {\n        console.log(res.data);\n        var findName = res.data.data;\n\n        if (data.name != '') {\n          if (!findName || _this2.testName == data.name) {\n            _this2.$axios({\n              url: '/api/v1/roles/' + _this2.roleId,\n              method: 'put',\n              data: data\n            }).then(function (res) {\n              if (res.data.code == 200) {\n                _this2.getRoles();\n              } else {\n                _this2.$router.push({\n                  path: \"/nopermisson\"\n                });\n              }\n            });\n          } else {\n            _this2.dialogFormVisible = true;\n            alert('Repeat Name,Please Input Again');\n          }\n        } else {\n          _this2.dialogFormVisible = true;\n          alert('Please Input Name');\n        }\n      });\n    },\n    // 删除角色\n    deleteRole: function deleteRole(index, data) {\n      var _this3 = this;\n\n      this.$axios({\n        url: '/api/v1/roles/' + data.id,\n        method: 'delete'\n      }).then(function (res) {\n        if (res.data.code == 200) {\n          _this3.getRoles();\n        } else {\n          _this3.$router.push({\n            path: \"/nopermisson\"\n          });\n        }\n      });\n    },\n    // 获取所有角色\n    getRoles: function getRoles() {\n      var _this4 = this;\n\n      this.$axios({\n        url: '/api/v1/roles',\n        method: 'get'\n      }).then(function (res) {\n        if (res.data.code == 200) {\n          _this4.roles = res.data.data;\n        } else {\n          _this4.$router.push({\n            path: \"/nopermisson\"\n          });\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["Role.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <el-container class=\"container\">\n    <el-header class=\"header\">\n      <el-button type=\"primary\" class=\"add\" @click=\"addRole()\">+Add</el-button>\n    </el-header>\n    <el-row>\n      <el-table :data=\"roles\" stripe style=\"width: 100% ;\">\n        <el-table-column prop=\"id\" label=\"ID\" class-name=\"table_column\"></el-table-column>\n        <el-table-column prop=\"name\" label=\"Name\" class-name=\"table_column\"></el-table-column>\n        <el-table-column prop=\"comment\" label=\"Comment\" class-name=\"table_column\"></el-table-column>\n        <el-table-column label=\"Operation\" class-name=\"table_column\">\n          <template slot-scope=\"scope\">\n            <el-button size=\"small\" @click=\"copyRole(scope.$index,scope.row)\" type=\"primary\" plain>Update</el-button>\n            <el-button size=\"small\" @click=\"deleteRole(scope.$index,scope.row)\" type=\"danger\" plain>Delete</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n    </el-row>\n    <!-- 模态框 -->\n    <el-dialog :title=\"title\" :visible.sync=\"dialogFormVisible\" center>\n      <el-form :model=\"form\" ref=\"form\">\n        <el-form-item label=\"RoleName\">\n          <el-input v-model=\"form.name\" placeholder=\"Please Input RoleName\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"Comment\">\n          <el-input type=\"textarea\" v-model=\"form.comment\" placeholder=\"Please Input Comment\"></el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button :visible.sync=\"checkSubmit\" type=\"primary\" @click=\"Submit()\">确 定</el-button>\n        <el-button type=\"warning\" @click=\"Close()\">取 消</el-button>\n      </div>\n    </el-dialog>\n  </el-container>\n</template>\n<script>\nexport default {\n  data() {\n    return {\n      title: '',\n      roles: [],\n      dialogFormVisible: false,\n      checkSubmit: true,\n      roleId: '',\n      form: {\n        name: '',\n        comment: '',\n      },\n      testName: '',\n      currentRole: [],\n      RolePermission: false,\n    };\n  },\n  mounted(){\n    this.getRoles();\n    // this.getUserAuthority();\n  },\n  methods: {\n    // 提交判断\n    Submit() {\n      this.dialogFormVisible = false;\n      if(this.checkSubmit){\n        this.createRole();\n      }else{\n        this.updateRole();\n      }\n    },\n    // 取消方法\n    Close() {\n      this.dialogFormVisible = false;\n      this.resetDialog();\n    },\n    // 清空模态框\n    resetDialog(){\n      this.form.name = '';\n      this.form.comment = '';\n    },\n    // 添加用户\n    addRole() {\n      this.title = 'Add Role';\n      this.dialogFormVisible = true;\n      this.resetDialog();\n    },\n    // 创建用户方法\n    createRole() {\n      let data = {\n        name: this.form.name,\n        comment: this.form.comment,\n      };\n      // 验证name是否重复\n      this.$axios({\n        url: '/api/v1/roles/' + data.name,\n        method: 'get',\n      }).then(res =>{\n        if(res.data.code == 200){\n          let findName = res.data.data;\n          // 判断name是否为空\n          if(data.name != ''){\n            if(findName != 200){\n              this.$axios({\n                url: '/api/v1/roles',\n                method: 'post',\n                data: data,\n              }).then(res =>{\n                if(res.data.code ==200){\n                  this.getRoles();\n                }else{\n                  this.$router.push({ path: \"/nopermisson\"});\n                }\n              })\n            }else{\n              this.dialogFormVisible = true;\n              alert('Repeat Name, Please Input Again');\n            }\n          }else{\n            this.dialogFormVisible = true;\n            alert('Please Input Name');\n          }\n        }else{\n          this.$router.push({ path: \"/nopermisson\"});\n        }\n      });\n      \n    },\n    // 更新用户对话框\n    copyRole(index,data) {\n      this.title = 'Update Role'\n      this.dialogFormVisible = true;\n      this.checkSubmit = false;\n      this.roleId = data.id;\n      this.form.name = data.name;\n      this.form.comment = data.comment;\n      this.testName = data.name;\n    },\n    // 更新角色\n    updateRole(){\n      let data = {\n        name: this.form.name,\n        comment: this.form.comment,\n      };\n      // 验证name是否重复\n      this.$axios({\n        url: '/api/v1/roles/' + data.name,\n        method: 'get',\n      }).then(res =>{\n        console.log(res.data);\n        let findName = res.data.data;\n        if(data.name != ''){\n          if(!findName || this.testName == data.name){\n            this.$axios({\n              url: '/api/v1/roles/' + this.roleId,\n              method: 'put',\n              data: data,\n            }).then(res =>{\n              if(res.data.code == 200){\n                this.getRoles();\n              }else{\n                this.$router.push({ path: \"/nopermisson\"});\n              }\n            });\n          }else{\n            this.dialogFormVisible = true;\n            alert('Repeat Name,Please Input Again');\n          }\n        }else{\n          this.dialogFormVisible = true;\n          alert('Please Input Name');\n        }\n      });\n    },\n    // 删除角色\n    deleteRole(index,data) {\n      this.$axios({\n        url: '/api/v1/roles/' + data.id,\n        method: 'delete',\n      }).then(res =>{\n        if(res.data.code == 200){\n          this.getRoles();\n        }else{\n          this.$router.push({ path: \"/nopermisson\"});\n        }\n      })\n    },\n    // 获取所有角色\n    getRoles() {\n      this.$axios({\n        url: '/api/v1/roles',\n        method: 'get',\n      }).then(res =>{\n        if(res.data.code == 200){\n          this.roles = res.data.data;\n        }else{\n          this.$router.push({ path: \"/nopermisson\"});\n        }\n      });\n    },\n    // 获取当前用户角色\n    // getUserAuthority() {\n    //   this.$axios({\n    //     url: '/api/v1/users/userAuthority',\n    //     method: 'get'\n    //   }).then(res =>{\n    //     // 判断当前角色权限\n    //     this.RolePermission = false;\n    //     for(var i = 0; i<res.data.roles.length; i++){\n    //       this.currentRole[i] = res.data.roles[i].name;\n    //     }\n    //     console.log(this.currentRole);\n    //     for(var i = 0; i<this.currentRole.length;i ++){\n    //       if(this.currentRole[i] == 'admin'){\n    //         this.RolePermission = true;\n    //       }\n    //     }\n    //     // 获取所有角色\n    //     if(this.RolePermission){\n    //       this.$axios({\n    //         url: '/api/v1/roles',\n    //         method: 'get',\n    //       }).then(res =>{\n    //         if(res.data.code == 200){\n    //           this.roles = res.data.data;\n    //         }else{\n    //           this.$router.push({ path: \"/nopermisson\"});\n    //         }\n    //       });\n    //     }else{\n    //       this.$router.push({ path: \"/nopermisson\"});\n    //     }\n    //   })\n    // }\n  }\n};\n</script>\n<style lang=\"scss\" scoped>\n  @import \"../../styles/style.scss\";\n  @import \"../../styles/variables.scss\";\n.container {\n  .header {\n    text-align: right;\n    padding-top: $size10;\n  }\n  /deep/ .table_column{\n    text-align: $position_center;\n  }\n  .input100{\n    width: 100%;\n  }\n}\n</style>\n\n\n\n"],"sourceRoot":"src/views/admin"}]}