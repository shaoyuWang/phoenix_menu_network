{"remainingRequest":"/Users/wangshaoyu/Desktop/Graduation design/phoenix_menu_network/client/node_modules/thread-loader/dist/cjs.js!/Users/wangshaoyu/Desktop/Graduation design/phoenix_menu_network/client/node_modules/babel-loader/lib/index.js!/Users/wangshaoyu/Desktop/Graduation design/phoenix_menu_network/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangshaoyu/Desktop/Graduation design/phoenix_menu_network/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangshaoyu/Desktop/Graduation design/phoenix_menu_network/client/src/views/admin/User.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangshaoyu/Desktop/Graduation design/phoenix_menu_network/client/src/views/admin/User.vue","mtime":1557755446876},{"path":"/Users/wangshaoyu/Desktop/Graduation design/phoenix_menu_network/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangshaoyu/Desktop/Graduation design/phoenix_menu_network/client/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangshaoyu/Desktop/Graduation design/phoenix_menu_network/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/wangshaoyu/Desktop/Graduation design/phoenix_menu_network/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangshaoyu/Desktop/Graduation design/phoenix_menu_network/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.last-index-of\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es7.promise.finally\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    return {\n      title: '',\n      users: [],\n      roles: [],\n      data: [],\n      dialogFormVisible: false,\n      checkSubmit: true,\n      roleChecked: [],\n      checkedRoleId: [],\n      form: {\n        username: '',\n        password: '',\n        name: '',\n        email: '',\n        phone: '',\n        role_id: [],\n        visitor: ''\n      },\n      user_id: ''\n    };\n  },\n  mounted: function mounted() {\n    this.getUsers(); // this.getRoles();\n  },\n  methods: {\n    // 拼接多个roles\n    formatter: function formatter(row, column) {\n      var allRole = '';\n\n      if (row.roles != []) {\n        for (var i = 0; i < row.roles.length; i++) {\n          allRole += row.roles[i].name + ',';\n        }\n\n        allRole = allRole.substring(0, allRole.lastIndexOf(','));\n      }\n\n      return allRole;\n    },\n    // 提交点击事件\n    Submit: function Submit() {\n      this.dialogFormVisible = false; // if(this.checkSubmit){\n      //   this.createUser();\n      // }else{\n      //   this.updateUser();\n      // }\n    },\n    //取消方法\n    Close: function Close() {\n      this.dialogFormVisible = false; // this.resetDialog();\n    },\n    // 清空添加框\n    resetDialog: function resetDialog() {// this.form.username = '';\n      // this.form.password = '';\n      // this.form.englishName = '';\n      // this.form.chinesehName = '';\n      // this.form.email = '';\n      // this.form.role_id = [];\n      // this.form.comment = '';\n    },\n    // 添加方法\n    addUser: function addUser() {\n      // this.title = 'Add User'\n      this.dialogFormVisible = true; // this.resetDialog();\n    },\n    // 创建用户\n    createUser: function createUser() {// // 邮箱格式正则\n      // let emailValidation = /^[A-Za-z0-9\\u4e00-\\u9fa5]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$/;\n      // let roles_id = [];\n      // for(var i = 0; i< this.form.role_id.length; i++){\n      //   roles_id.push({id: this.form.role_id[i]});\n      // }\n      // let data ={\n      //   username: this.form.username,\n      //   password: this.form.password,\n      //   englishName: this.form.englishName,\n      //   chinesehName: this.form.chinesehName,\n      //   email: this.form.email,\n      //   roles: roles_id,\n      //   comment: this.form.comment,\n      // };\n      // this.$axios({\n      //   url: '/api/v1/users/' + data.username,\n      //   method: 'get',\n      // }).then(res =>{\n      //   if(res.data.code == 200){\n      //     let findName = res.data.data;\n      //     // 判断关键值是否为空\n      //     if(data.username && data.password && data.email != ''){\n      //       // 判断是否有重复用户名\n      //       if(findName != 200){\n      //         // 验证邮箱格式\n      //         if(emailValidation.test(data.email)){\n      //           this.$axios({\n      //             url: '/api/v1/users',\n      //             method: 'post',\n      //             data: data,\n      //           }).then(res=>{\n      //             if(res.data.code == 200){\n      //               this.getUsers();\n      //             }else{\n      //               this.$router.push({ path: \"/nopermisson\"});\n      //             }\n      //           });\n      //         }else{\n      //           this.dialogFormVisible = true;\n      //           alert('Please Input Correct Email Format')\n      //         }\n      //       }else{\n      //         this.dialogFormVisible = true;\n      //         alert('Repeat Username, Please Input Again');\n      //       }\n      //     }else{\n      //       this.dialogFormVisible = true;\n      //       alert('please Input All Data');\n      //     }\n      //   }else{\n      //     this.$router.push({ path: \"/nopermisson\"});\n      //   }\n      // });\n    },\n    // 复写用户信息\n    copyUser: function copyUser(index, data) {\n      // this.title = 'Update User'\n      this.dialogFormVisible = true; // this.checkSubmit = false;\n      // this.user_id = data.id;\n      // this.form.englishName = data.englishName;\n      // this.form.chinesehName = data.chinesehName;\n      // this.form.email = data.email;\n      // this.roleChecked = data.roles;\n      // this.form.comment = data.comment;\n      // // 选择角色\n      // var role_id = []\n      // for(var i = 0;i<data.roles.length;i++){\n      //   role_id.push(data.roles[i].id)\n      // }\n      // this.form.role_id=role_id;\n    },\n    // 更新用户\n    updateUser: function updateUser() {// // 邮箱格式正则\n      // let emailValidation = /^[A-Za-z0-9\\u4e00-\\u9fa5]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$/;\n      // let roles_id = [];\n      // for(var i = 0; i< this.form.role_id.length; i++){\n      //   roles_id.push({id: this.form.role_id[i]});\n      // }\n      // let data = {\n      //   password: this.form.password,\n      //   englishName: this.form.englishName,\n      //   chinesehName: this.form.chinesehName,\n      //   email: this.form.email,\n      //   roles: roles_id,\n      //   comment: this.form.comment,\n      // };\n      // if(data.email != ''){\n      //   // 验证邮箱格式\n      //   if(emailValidation.test(data.email)){\n      //     this.$axios({\n      //       url: '/api/v1/users/' + this.user_id,\n      //       method: 'put',\n      //       data: data,\n      //     }).then(res=>{\n      //       if(res.data.code == 200){\n      //         this.getUsers();\n      //       }else{\n      //         this.$router.push({ path: \"/nopermisson\"});\n      //       }\n      //     });\n      //   }else{\n      //     this.dialogFormVisible = true;\n      //     alert('Please Input Correct Email Format');\n      //   }\n      // }else{\n      //   this.dialogFormVisible = true;\n      //   alert('please Input All Data');\n      // }\n    },\n    // 获取用户\n    getUsers: function getUsers() {\n      this.$axios({\n        url: '/users/getAllUsers',\n        method: 'get'\n      }).then(function (res) {\n        console.log(res); // if(res.data.code == 200){\n        //   this.users = res.data.data;\n        // }else{\n        //   this.$router.push({ path: \"/nopermisson\"});\n        // }\n      });\n    },\n    // 获取角色\n    getRoles: function getRoles() {// this.$axios({\n      //   url: '/api/v1/roles',\n      //   method: 'get',\n      // }).then(res =>{\n      //   if(res.data.code == 200){\n      //     this.roles = res.data.data;\n      //   }else{\n      //     this.$router.push({ path: \"/nopermisson\"});\n      //   }\n      // })\n    }\n  }\n};",null]}