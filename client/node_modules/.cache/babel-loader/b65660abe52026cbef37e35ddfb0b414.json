{"remainingRequest":"/Users/wangshaoyu/Desktop/毕业设计/phoenix_menu_network/client/node_modules/thread-loader/dist/cjs.js!/Users/wangshaoyu/Desktop/毕业设计/phoenix_menu_network/client/node_modules/babel-loader/lib/index.js!/Users/wangshaoyu/Desktop/毕业设计/phoenix_menu_network/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangshaoyu/Desktop/毕业设计/phoenix_menu_network/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangshaoyu/Desktop/毕业设计/phoenix_menu_network/client/src/views/admin/Role.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangshaoyu/Desktop/毕业设计/phoenix_menu_network/client/src/views/admin/Role.vue","mtime":1548870481000},{"path":"/Users/wangshaoyu/Desktop/毕业设计/phoenix_menu_network/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangshaoyu/Desktop/毕业设计/phoenix_menu_network/client/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangshaoyu/Desktop/毕业设计/phoenix_menu_network/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/wangshaoyu/Desktop/毕业设计/phoenix_menu_network/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangshaoyu/Desktop/毕业设计/phoenix_menu_network/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    return {\n      title: '',\n      roles: [],\n      dialogFormVisible: false,\n      checkSubmit: true,\n      roleId: '',\n      form: {\n        name: '',\n        comment: ''\n      },\n      testName: '',\n      currentRole: [],\n      RolePermission: false\n    };\n  },\n  mounted: function mounted() {\n    this.getRoles(); // this.getUserAuthority();\n  },\n  methods: {\n    // 提交判断\n    Submit: function Submit() {\n      this.dialogFormVisible = false;\n\n      if (this.checkSubmit) {\n        this.createRole();\n      } else {\n        this.updateRole();\n      }\n    },\n    // 取消方法\n    Close: function Close() {\n      this.dialogFormVisible = false;\n      this.resetDialog();\n    },\n    // 清空模态框\n    resetDialog: function resetDialog() {\n      this.form.name = '';\n      this.form.comment = '';\n    },\n    // 添加用户\n    addRole: function addRole() {\n      this.title = 'Add Role';\n      this.dialogFormVisible = true;\n      this.resetDialog();\n    },\n    // 创建用户方法\n    createRole: function createRole() {\n      var _this = this;\n\n      var data = {\n        name: this.form.name,\n        comment: this.form.comment\n      }; // 验证name是否重复\n\n      this.$axios({\n        url: '/api/v1/roles/' + data.name,\n        method: 'get'\n      }).then(function (res) {\n        if (res.data.code == 200) {\n          var findName = res.data.data; // 判断name是否为空\n\n          if (data.name != '') {\n            if (findName != 200) {\n              _this.$axios({\n                url: '/api/v1/roles',\n                method: 'post',\n                data: data\n              }).then(function (res) {\n                if (res.data.code == 200) {\n                  _this.getRoles();\n                } else {\n                  _this.$router.push({\n                    path: \"/nopermisson\"\n                  });\n                }\n              });\n            } else {\n              _this.dialogFormVisible = true;\n              alert('Repeat Name, Please Input Again');\n            }\n          } else {\n            _this.dialogFormVisible = true;\n            alert('Please Input Name');\n          }\n        } else {\n          _this.$router.push({\n            path: \"/nopermisson\"\n          });\n        }\n      });\n    },\n    // 更新用户对话框\n    copyRole: function copyRole(index, data) {\n      this.title = 'Update Role';\n      this.dialogFormVisible = true;\n      this.checkSubmit = false;\n      this.roleId = data.id;\n      this.form.name = data.name;\n      this.form.comment = data.comment;\n      this.testName = data.name;\n    },\n    // 更新角色\n    updateRole: function updateRole() {\n      var _this2 = this;\n\n      var data = {\n        name: this.form.name,\n        comment: this.form.comment\n      }; // 验证name是否重复\n\n      this.$axios({\n        url: '/api/v1/roles/' + data.name,\n        method: 'get'\n      }).then(function (res) {\n        console.log(res.data);\n        var findName = res.data.data;\n\n        if (data.name != '') {\n          if (!findName || _this2.testName == data.name) {\n            _this2.$axios({\n              url: '/api/v1/roles/' + _this2.roleId,\n              method: 'put',\n              data: data\n            }).then(function (res) {\n              if (res.data.code == 200) {\n                _this2.getRoles();\n              } else {\n                _this2.$router.push({\n                  path: \"/nopermisson\"\n                });\n              }\n            });\n          } else {\n            _this2.dialogFormVisible = true;\n            alert('Repeat Name,Please Input Again');\n          }\n        } else {\n          _this2.dialogFormVisible = true;\n          alert('Please Input Name');\n        }\n      });\n    },\n    // 删除角色\n    deleteRole: function deleteRole(index, data) {\n      var _this3 = this;\n\n      this.$axios({\n        url: '/api/v1/roles/' + data.id,\n        method: 'delete'\n      }).then(function (res) {\n        if (res.data.code == 200) {\n          _this3.getRoles();\n        } else {\n          _this3.$router.push({\n            path: \"/nopermisson\"\n          });\n        }\n      });\n    },\n    // 获取所有角色\n    getRoles: function getRoles() {\n      var _this4 = this;\n\n      this.$axios({\n        url: '/api/v1/roles',\n        method: 'get'\n      }).then(function (res) {\n        if (res.data.code == 200) {\n          _this4.roles = res.data.data;\n        } else {\n          _this4.$router.push({\n            path: \"/nopermisson\"\n          });\n        }\n      });\n    }\n  }\n};",null]}